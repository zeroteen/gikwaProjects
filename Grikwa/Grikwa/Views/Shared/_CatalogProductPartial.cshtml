@model Grikwa.Models.CatalogProductModel

<div class="col-xs-6 col-md-3 pricing-box">
    <div class="widget-box">
        <div class="widget-header header-color-purple">
            <h6 class="lighter">
                @Model.Name
            </h6>
        </div>

        <div class="widget-body">
            <div class="widget-main">
                @{
                    try
                    {
                        <img align="middle" class="img-thumbnail img-responsive" src="@Url.Action("ProductImage", "Store", new { @id=Model.ProductID, sizeType = 1})" alt="product image">
                    }
                    catch (Exception e)
                    {
                        <img align="middle" class="img-thumbnail img-responsive" src="~/Images/Products/thumb-0.jpg" alt="text book image">
                    }
                }
                <ul class="list-unstyled">
                    <li>
                        <strong>By:</strong> @Html.ActionLink(Model.UserFullName, "BusinessCard", "Store", new { @id = Model.UserID }, null)
                    </li>
                    <li>
                        <strong>On:</strong> @Model.DatePosted.AddHours(2).ToShortDateString() @Model.DatePosted.AddHours(2).ToShortTimeString()
                    </li>
                    <li>
                        @Model.ShortDescription
                    </li>
                    <li>
                        @Html.ActionLink("More info...", "Details", "Store", new { @id = Model.ProductID }, null)
                    </li>
                </ul>
                <hr />
                @*@if (Model.ProductStatus != Grikwa.Models.ProductStatus.SOLD)
                {
                    <span class="badge badge-info" title="Offers">@Model.Offers Offers</span>
                }*@
                @{
                    var facebookLink = "https://www.facebook.com/sharer/sharer.php?u=" + Url.Encode(Url.Action("Details", "Store", new { @id = Model.ProductID }, "http"));
                    var twitterLink = "https://twitter.com/share?url=" + Url.Encode(Url.Action("Details", "Store", new { @id = Model.ProductID }, "http"));
                    var googleLink = "https://plus.google.com/share?url=" + Url.Encode(Url.Action("Details", "Store", new { @id = Model.ProductID }, "http"));
                }
                <a class="badge badge-info" title="Share" href="@facebookLink" target="_blank">
                    <i class=" icon-facebook">
                    </i>
                </a>
                <a class="badge badge-info" title="Share" href="@twitterLink" target="_blank">
                    <i class="icon-twitter"></i>
                </a>
                <a class="badge badge-danger" title="Share" href="@googleLink" target="_blank">
                    <i class="icon-google-plus"></i>
                </a>
                <hr />
                <div data-a-sign="R " class="price">
                    @Model.Price
                </div>
            </div>

            <div>
                @if (Model.ProductStatus == Grikwa.Models.ProductStatus.SOLD)
                {
                    <span class="btn btn-danger btn-block disabled">
                        SOLD
                    </span>
                }
                else if (Model.ProductStatus == Grikwa.Models.ProductStatus.REQUESTED)
                {
                    <a href="@Url.Action("Chat", "Store")" class="btn btn-light btn-block btn-inverse">
                        <i class="icon-comments bigger-110"></i>
                        <span>PENDING...</span>
                    </a>
                }
                else if (Request.IsAuthenticated && Context.User.Identity.Name.Equals(Model.UserName))
                {
                    <a href="@Url.Action("Edit", "Store", new { @id = Model.ProductID })" class="btn btn-purple btn-block btn-inverse">
                        <i class="icon-edit-sign bigger-110"></i>
                        <span>Edit</span>
                    </a>
                }
                else if (Model.ProductStatus == Grikwa.Models.ProductStatus.NEW)
                {
                    <a href="@Url.Action("Buy", "Store", new { @id = Model.ProductID })" class="btn btn-yellow btn-block btn-inverse">
                        <i class="icon-shopping-cart bigger-110"></i>
                        <span>Buy</span>
                        <input type="hidden" value="@Model.Name" />
                    </a>
                }

            </div>
        </div>
    </div>
</div>
